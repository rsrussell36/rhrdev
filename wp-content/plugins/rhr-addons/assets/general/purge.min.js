(function ($) {
	"use strict";
	// Clear cache files
	$(document).ready(function(){
		
		if($("#wpadminbar .rhrs-purge-clear").length > 0){
			//console.log('ok');
			var ids="rhrs-purge-clear";
			var _action = "rhrs_purge_current_clear";
			
			$('.'+ ids + ' .ab-submenu a').on("click", function(e) {
				e.preventDefault();				
					var $this = $(this);
					var href= $this.attr('href');
					href = href.replace('#clear-','');
					
					if(href=='rhrs-all'){
						var confirmation = confirm("Are you sure want to remove all cache files?");
					}else{
						var confirmation = true;
					}
					if(href && confirmation){
						$.ajax({
							url: rhrs_ajax_url,
							type: "post",
							data: {
								action: _action,
								security: rhrs_nonce,
								rhrs_name : href
							},
							success: function(response) {
								if(response){
									setTimeout(function() {
										location.reload(true);
									}, 50);
								}
							},
						});
					}
			});
		}
	});
	
})(window.jQuery);
